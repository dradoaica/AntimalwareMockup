<!DOCTYPE html>
<html>
<head>
    <title>SignalR Antimalware</title>
    <style type="text/css">
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <input type="button" id="enableScanning" value="Enable scanning" />
        <input type="button" id="disableScanning" value="Disable Scanning" />
        <input type="button" id="startScan" value="Start scan" />
        <input type="button" id="stopScan" value="Stop scan" />
        <input type="button" id="addSignalRClient" value="Add SignalR client" />
        <input type="button" id="deleteSignalRClient" value="Delete SignalR client" />
    </div>
    <div>
        <label>Events:</label>
        <ul id="events"></ul>
    </div>
    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery-1.6.4.min.js"></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/jquery.signalR-2.3.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="http://localhost:8000/signalr/hubs"></script>
    <script type="text/javascript">
        $(function () {
            var antimalware = $.connection.antimalwareHub;
            antimalware.client.pushNotification = function (event) {
                var node = document.createElement("LI");                 
                var textnode = document.createTextNode(event.Message);       
                node.appendChild(textnode);                              
                document.getElementById("events").appendChild(node);
            };
            $.connection.hub.url = "http://localhost:8000/signalr";
            $.connection.hub.start().done(function () {
                $('#enableScanning').click(function () {
                    antimalware.server.enableScanning();
                });
                $('#disableScanning').click(function () {
                    antimalware.server.disableScanning();
                });
                $('#startScan').click(function () {
                    antimalware.server.startScan().done(function (result) {
                        if (result)
                            alert(result.Message);
                    });
                });
                $('#stopScan').click(function () {
                    antimalware.server.stopScan().done(function (result) {
                        if (result)
                            alert(result.Message);
                    });
                });
                $('#addSignalRClient').click(function () {
                    antimalware.server.addSignalRClient($.connection.hub.id);
                });
                $('#deleteSignalRClient').click(function () {
                    antimalware.server.deleteSignalRClient();
                });
            });
        });
    </script>
</body>
</html>